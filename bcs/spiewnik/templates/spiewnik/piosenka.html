{% load static %}
<!DOCTYPE html>
<html lang="pl">
    <head>
        <meta charset="UTF-8" />
        <title>{{ title }} - Śpiewnik</title>
        <link rel="stylesheet" href="{% static 'spiewnik/css/piosenka.css' %}" />
    </head>
    <body>
        <div class="song">
            <div class="song__header">
                <div class="song__back-link">
                    <a href="{% url 'spiewnik:spis_tresci' %}">&larr; Powrót do spisu treści</a>
                </div>
                <div class="song__category">
                    {% if categories %}
                        {% for cat in categories %}
                            <a href="{% url 'spiewnik:spis_tresci_kat' cat.pk %}"
                               class="song__category-link">{{ cat }}</a>
                            {% if not forloop.last %}•{% endif %}
                        {% endfor %}
                    {% else %}
                        Brak kategorii
                    {% endif %}
                </div>
                {% if category %}
                    <div class="belt">
                        <div class="belt__category">
                            <span class="belt__category-label">{{ "W kategorii: " }}</span>
                            <div>{{ category.nazwa }}</div>
                        </div>
                        <div class="belt__sections">
                            <div class="belt__prev-section">
                                <div class="belt__label">Poprzednia piosenka</div>
                                {% if prev_song %}
                                    <a href="{% url 'spiewnik:piosenka' category.pk prev_song.pk %}"
                                       class="belt__link">{{ prev_song.tytul }}</a>
                                {% else %}
                                    <p class="belt__no-song">Początek kategorii</p>
                                {% endif %}
                            </div>
                            <div class="belt__next-section">
                                <div class="belt__label">Następna piosenka</div>
                                {% if next_song %}
                                    <a href="{% url 'spiewnik:piosenka' category.pk next_song.pk %}"
                                       class="belt__link">{{ next_song.tytul }}</a>
                                {% else %}
                                    <p class="belt__no-song">Koniec kategorii</p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                {% endif %}
                <div class="song__header-row">
                    {% if request.user.is_staff %}<a href="{{ admin_url }}" class="song__invisible-button">✏️ Edytuj</a>{% endif %}
                    <h1 class="song__title">{{ title }}</h1>
                    {% if request.user.is_staff %}<a href="{{ admin_url }}" class="song__edit-button">✏️ Edytuj</a>{% endif %}
                </div>
                <div class="song__authors">
                    <em class="song__authors-label">{{ authors_label }}</em>{{ authors }}
                </div>
            </div>
        </div>
        <div class="lyrics">
            {% for line in lines %}
                <div class="lyrics__line">
                    <div class="lyrics__text">
                        {% if line.comment %}
                            <span class="lyrics__comment">{{ line.text }}</span>
                        {% else %}
                            {% if line.bold %}<strong>{% endif %}
                                {% if line.highlight %}
                                    <mark>{{ line.text }}</mark>
                                {% else %}
                                    {{ line.text }}
                                {% endif %}
                                {% if line.bold %}</strong>{% endif %}
                        {% endif %}
                    </div>
                    <div></div>
                    <!-- spacer column -->
                    <div class="lyrics__chords">
                        {% if line.chords %}{{ line.chords|join:" " }}{% endif %}
                    </div>
                    <div></div>
                    <!-- spacer column -->
                    <div class="lyrics__alt">
                        <!-- Future alternative lyrics go here -->
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</body>
</html>
